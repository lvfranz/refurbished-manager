{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<div style="max-width: 800px; margin: 20px auto;">
    <h1>üè∑Ô∏è Imposta Brand e Categoria</h1>

    <div style="margin: 20px 0; padding: 20px; background-color: #e3f2fd; border: 2px solid #2196F3; border-radius: 8px;">
        <p style="margin: 0; font-size: 18px; font-weight: bold; color: #0d47a1;">
            üìù Stai per modificare <strong style="color: #d32f2f;">{{ queryset.count }} articoli</strong> selezionati.
        </p>
    </div>

    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="imposta_brand_categoria">
        {% for obj in queryset %}
            <input type="hidden" name="{{ action_checkbox_name }}" value="{{ obj.pk }}">
        {% endfor %}

        <div style="margin: 20px 0;">
            {{ form.as_p }}
        </div>

        <div style="margin-top: 20px; padding: 20px; background-color: #fff3cd; border: 2px solid #ff9800; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <p style="margin: 0; font-size: 18px; font-weight: bold; color: #e65100;">
                ‚ÑπÔ∏è NOTA IMPORTANTE:
            </p>
            <p style="margin: 10px 0 0 0; font-size: 16px; line-height: 1.6; color: #333;">
                Lascia un campo <strong>vuoto</strong> per non modificarlo. Solo i campi <strong style="color: #f57c00;">compilati</strong> verranno aggiornati.
            </p>
        </div>

        <div style="margin-top: 30px;">
            <button type="submit" name="apply" style="background-color: #28a745; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold;">
                ‚úì Applica Modifiche
            </button>
            <a href="{% url 'admin:orders_articolo_changelist' %}" style="margin-left: 10px; padding: 12px 24px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 4px; display: inline-block; font-size: 16px;">
                Annulla
            </a>
        </div>
    </form>

    <div style="margin-top: 30px; padding: 20px; background-color: #ffffff; border: 2px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="margin-top: 0; color: #333; font-size: 20px;">üìã Articoli Selezionati:</h3>
        <ul style="max-height: 300px; overflow-y: auto; line-height: 2;">
            {% for articolo in queryset %}
                <li style="margin-bottom: 15px; padding: 10px; background-color: #f8f9fa; border-left: 4px solid #2196F3; border-radius: 4px;">
                    <strong style="font-size: 16px; color: #000;">{{ articolo.codice_articolo }}</strong> - <span style="color: #333;">{{ articolo.descrizione|truncatewords:10 }}</span>
                    <br><span style="font-size: 14px; color: #000; font-weight: 500;">
                        Brand attuale: <strong style="color: #f57c00;">{{ articolo.costruttore|default:"non impostato" }}</strong> |
                        Categoria: <strong style="color: #f57c00;">{{ articolo.categoria|default:"non impostata" }}</strong>
                    </span>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}

